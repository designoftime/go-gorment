import{m as R,r as n,S as U,u as H,j as e,L as k,d as s}from"./index-b7a5549d.js";import{g as V,f as $,d as q,e as z}from"./Layout-f2a02bb8.js";import{a as G}from"./CategoryTable-b5a3a8c6.js";import{B as J,C as K}from"./BulkActionDrawer-18b446ee.js";import{D as O}from"./EditDeleteButton-4d689b9f.js";import{L as Q}from"./Loading-b98c603b.js";import{N as W}from"./NotFound-aab8acd4.js";import{P as X}from"./PageTitle-800b2fce.js";import{u as Y}from"./SettingServices-7f7a0dde.js";import{u as Z}from"./useFilter-d1e31a51.js";import{u as ee,C as se}from"./themeServices-4cc20a2b.js";import{u as te}from"./useUtilsFunction-3ede5aec.js";import"./iconBase-4887631a.js";import"./DrawerButton-b9b70d23.js";import"./SelectLanguageTwo-f9b2e648.js";import"./LanguageServices-74d9215e.js";import"./httpService-f80adca5.js";import"./spinner-f39505bc.js";import"./ParentCategory-85c82093.js";import"./toast-03090123.js";import"./index.esm-3774b945.js";import"./InputArea-b4aac65e.js";import"./LabelArea-03aa42f0.js";import"./SwitchToggle-f89c729e.js";import"./index.prod-0cf84bad.js";import"./TextAreaCom-18b804f0.js";import"./Uploader-bbb6c4da.js";import"./tslib.es6-1fe07526.js";import"./index-3dfa6e17.js";import"./useTranslationValue-bbbde44d.js";import"./CurrencyServices-a77033de.js";import"./AdminServices-03b8c083.js";import"./CustomerServices-5f73556c.js";import"./Tooltip-1cb23d0e.js";import"./browser-f394fd76.js";const Re=()=>{const{id:d}=R(),[c,A]=n.useState([]),[f,v]=n.useState([]),[j,P]=n.useState(!1),[m,x]=n.useState([]),{toggleDrawer:S,lang:b}=n.useContext(U),{handleDeleteMany:F,allId:T,handleUpdateMany:B}=ee(),{data:h,loading:p,error:N}=Y(se.getAllCategory),{showingTranslateValue:D}=te(),{t:r}=H();n.useEffect(()=>{var w,y;const l=(t,o,i=[])=>{for(let a of o){if(a._id===t)return i.concat(a);const g=l(t,a==null?void 0:a.children,i==null?void 0:i.concat(a));if(g)return g}},u=(t,o)=>{var i;return t._id===o?t:(i=t==null?void 0:t.children)==null?void 0:i.reduce((a,g)=>a??u(g,o),void 0)};if(!p){const t=u(h[0],d),o=l(d,(w=h[0])==null?void 0:w.children);((y=t==null?void 0:t.children)==null?void 0:y.length)>0&&(A(t==null?void 0:t.children),v(o))}},[d,p,h,c]);const{totalResults:I,resultsPerPage:E,dataTable:L,serviceData:C,handleChangePage:_}=Z(c),M=()=>{P(!j),x(c==null?void 0:c.map(l=>l._id)),j&&x([])};return e.jsxs(e.Fragment,{children:[e.jsx(X,{children:r("CategoryPageTitle")}),e.jsx(O,{ids:T,setIsCheck:x,category:!0}),e.jsx(J,{ids:T,title:"Child Categories",lang:b,data:h,childId:d}),e.jsx("div",{className:"flex items-center pb-4",children:e.jsxs("ol",{className:"flex items-center w-full overflow-hidden font-serif",children:[e.jsx("li",{className:"text-sm pr-1 transition duration-200 ease-in cursor-pointer hover:text-emerald-500 font-semibold",children:e.jsx(k,{to:"/categories",children:r("Categories")})}),f==null?void 0:f.map((l,u)=>e.jsxs("span",{className:"flex items-center font-serif",children:[e.jsxs("li",{className:"text-sm mt-[1px]",children:[" ",e.jsx(V,{})," "]}),e.jsx("li",{className:"text-sm pl-1 transition duration-200 ease-in cursor-pointer text-blue-700 hover:text-emerald-500 font-semibold ",children:e.jsx(k,{to:`/categories/${l._id}`,children:D(l==null?void 0:l.name)})})]},u+1))]})}),e.jsx(s.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:e.jsx(s.CardBody,{children:e.jsxs("div",{className:"flex justify-end items-end",children:[e.jsxs(s.Button,{onClick:S,className:"rounded-md h-12",children:[e.jsx("span",{className:"mr-3",children:e.jsx($,{})}),r("AddCategory")]}),e.jsx("div",{className:"ml-3 w-full md:w-24 lg:w-24 xl:w-24",children:e.jsxs(s.Button,{disabled:m.length<1,onClick:()=>B(m),className:"w-full rounded-md h-12",children:[e.jsx(q,{}),r("BulkAction")]})}),e.jsxs(s.Button,{disabled:m.length<1,onClick:()=>F(m),className:"ml-3 rounded-md h-12 bg-red-500",children:[e.jsx("span",{className:"mr-3",children:e.jsx(z,{})}),r("Delete")]})]})})}),p?e.jsx(Q,{loading:p}):N?e.jsx("span",{className:"text-center mx-auto text-red-500",children:N}):(C==null?void 0:C.length)!==0?e.jsxs(s.TableContainer,{className:"mb-8",children:[e.jsxs(s.Table,{children:[e.jsx(s.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(s.TableCell,{children:e.jsx(K,{type:"checkbox",name:"selectAll",id:"selectAll",handleClick:M,isChecked:j})}),e.jsx(s.TableCell,{children:r("catIdTbl")}),e.jsx(s.TableCell,{children:r("catIconTbl")}),e.jsx(s.TableCell,{children:r("Name")}),e.jsx(s.TableCell,{children:r("Description")}),e.jsx(s.TableCell,{className:"text-center",children:r("catPublishedTbl")}),e.jsx(s.TableCell,{className:"text-right",children:r("catActionsTbl")})]})}),e.jsx(G,{categories:L,data:h,lang:b,isCheck:m,setIsCheck:x,useParamId:d})]}),e.jsx(s.TableFooter,{children:e.jsx(s.Pagination,{totalResults:I,resultsPerPage:E,onChange:_,label:"Table navigation"})})]}):e.jsx(W,{title:"Sorry, There are no categories right now."})]})};export{Re as default};
