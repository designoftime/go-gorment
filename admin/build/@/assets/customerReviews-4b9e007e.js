import{r as o,S as U,u as $,j as e,d as r}from"./index-a9385069.js";import{N as L}from"./NotFound-517fd429.js";import{P as V}from"./PageTitle-820c6ec2.js";import{u as q}from"./SettingServices-17cecd91.js";import{u as O}from"./useFilter-1ab70a06.js";import{R as S,D as z,E as J}from"./EditDeleteButton-b822a4fe.js";import{I}from"./InputAreaTwo-22f67493.js";import{u as Z,E as y}from"./index.esm-b59b7f5e.js";import{a as N,n as G}from"./toast-3054dd83.js";import{T as H}from"./TextAreaCom-03dddabe.js";import{u as K}from"./themeServices-f42e45be.js";import{T as Q}from"./TableLoading-d0e6d68d.js";import"./index-8dc927ce.js";import"./httpService-3eb840d8.js";import"./browser-ccd8b7b6.js";import"./useUtilsFunction-668d98f1.js";import"./Layout-871ece32.js";import"./iconBase-59c7b66b.js";import"./spinner-f39505bc.js";import"./AdminServices-e3c27bca.js";import"./LanguageServices-af65a0ea.js";import"./CurrencyServices-e6013072.js";import"./Tooltip-f9a990c8.js";const W=a=>{const[h,c]=o.useState(""),[u,m]=o.useState(!1),{closeDrawer:x,setIsUpdate:p}=o.useContext(U),{register:v,handleSubmit:b,setValue:n,formState:{errors:R}}=Z(),k=async i=>{var d,t;try{const l={rating:i.review_rating,reviewTitle:i.review_title,review:i.review_description};if(a&&l.rating<=5){const j=await S.updateReviews(a,l);p(!0),G(j.message),x()}else N("Rating must be less than or equal to 5.");m(!1)}catch(l){N(l?(t=(d=l==null?void 0:l.response)==null?void 0:d.data)==null?void 0:t.message:l.message),x()}};return o.useEffect(()=>{a&&(async()=>{var i,d;try{const t=await S.getReviewById(a);t&&(n("review_rating",t.data.rating),n("review_title",t.data.reviewTitle),n("review_description",t.data.review))}catch(t){N(t?(d=(i=t==null?void 0:t.response)==null?void 0:i.data)==null?void 0:d.message:t.message)}})()},[a,n]),{register:v,handleSubmit:b,onSubmit:k,errors:R,setImageUrl:c,imageUrl:h,isSubmitting:u}},De=()=>{const{data:a,loading:h,error:c}=q(S.getAllReviews),{title:u,serviceId:m,handleModalOpen:x,handleUpdate:p}=K(),{toggleDrawer:v,isDrawerOpen:b}=o.useContext(U),{data:n}=a,{userRef:R,dataTable:k,serviceData:i,filename:d,isDisabled:t,setSearchUser:l,totalResults:j,resultsPerPage:E,handleSubmitUser:X,handleSelectFile:Y,handleChangePage:F,handleUploadMultiple:ee,handleRemoveSelectFile:se}=O(n),{t:g}=$(),{register:w,handleSubmit:A,onSubmit:B,errors:f,setImageUrl:ae,imageUrl:te,isSubmitting:re}=W(m);return e.jsxs(e.Fragment,{children:[e.jsx(z,{id:m,title:u}),e.jsx(V,{children:"Customer Reviews"}),e.jsxs("div",{className:"flex-grow scrollbar-hide w-full max-h-full xl:px-10",children:[e.jsx("div",{className:"inline-flex md:text-base text-sm my-3 text-gray-500 dark:text-gray-400",children:e.jsx("strong",{children:" Manage All Customer Reviews"})}),e.jsx("hr",{className:"md:mb-12 mb-3"}),e.jsxs("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:[a.totalReviews," global ratings"]}),e.jsxs("div",{className:"flex items-center mt-4",children:[e.jsxs("a",{href:"#",className:"text-sm font-medium text-blue-600 dark:text-blue-500 hover:underline",children:[a.fiveStar," star"]}),e.jsx("div",{style:{width:` ${a.fiveStar}px`},className:"h-5 mx-4 bg-gray-200 rounded dark:bg-gray-700",children:e.jsx("div",{className:"h-5 bg-yellow-300 rounded"})})]}),e.jsxs("div",{className:"flex items-center mt-4",children:[e.jsxs("a",{href:"#",className:"text-sm font-medium text-blue-600 dark:text-blue-500 hover:underline",children:[a.fourStar," star"]}),e.jsx("div",{style:{width:` ${a.fourStar}px`},className:" h-5 mx-4 bg-gray-200 rounded dark:bg-gray-700",children:e.jsx("div",{className:"h-5 bg-yellow-300 rounded"})})]}),e.jsxs("div",{className:"flex items-center mt-4",children:[e.jsxs("a",{href:"#",className:"text-sm font-medium text-blue-600 dark:text-blue-500 hover:underline",children:[a.threeStar," star"]}),e.jsx("div",{style:{width:` ${a.threeStar}px`},className:" h-5 mx-4 bg-gray-200 rounded dark:bg-gray-700",children:e.jsx("div",{className:"h-5 bg-yellow-300 rounded"})})]}),e.jsxs("div",{className:"flex items-center mt-4",children:[e.jsxs("a",{href:"#",className:"text-sm font-medium text-blue-600 dark:text-blue-500 hover:underline",children:[a.twoStar," star"]}),e.jsx("div",{style:{width:` ${a.twoStar}px`},className:" h-5 mx-4 bg-gray-200 rounded dark:bg-gray-700",children:e.jsx("div",{className:"h-5 bg-yellow-300 rounded"})})]}),e.jsxs("div",{className:"flex items-center mt-4 pb-8",children:[e.jsxs("a",{href:"#",className:"text-sm font-medium text-blue-600 dark:text-blue-500 hover:underline",children:[a.oneStar," star"]}),e.jsx("div",{style:{width:` ${a.oneStar}px`},className:" h-5 mx-4 bg-gray-200 rounded dark:bg-gray-700",children:e.jsx("div",{className:"h-5 bg-yellow-300 rounded"})})]}),h?e.jsx(Q,{row:12,col:7,width:160,height:20}):c?e.jsx("span",{className:"text-center mx-auto text-red-500",children:c}):e.jsxs(r.TableContainer,{className:"mb-8",children:[e.jsx("div",{className:"grid  md:grid-cols-12 sm:grid-cols-12 gap-3 md:gap-5 xl:gap-6 lg:gap-6 md:mb-6 mb-3 relative",children:b?e.jsx("div",{className:"sm:col-span-4",children:e.jsx(r.Card,{children:e.jsx(r.CardBody,{children:e.jsxs("form",{onSubmit:A(B),children:[e.jsxs("div",{className:"col-span-4",children:[e.jsx("label",{className:"block md:text-sm md:col-span-1 sm:col-span-2 text-xs font-semibold text-gray-600 dark:text-gray-400 mb-1",children:"Review Rating"}),e.jsx(I,{register:w,label:g("Review Rating"),name:"review_rating",minValue:1,maxValue:5,defaultValue:1,type:"number",placeholder:g("Review Rating")}),e.jsx(y,{errorName:f.review_rating})]}),e.jsxs("div",{className:"col-span-4",children:[e.jsx("label",{className:"block md:text-sm md:col-span-1 sm:col-span-2 text-xs font-semibold text-gray-600 dark:text-gray-400 mb-1",children:"Review Title"}),e.jsx(I,{required:!0,register:w,label:g("Review Title"),name:"review_title",type:"text",placeholder:g("Review Title")}),e.jsx(y,{errorName:f.review_title})]}),e.jsxs("div",{className:"sm:col-span-4",children:[e.jsx("label",{className:"block md:text-sm  md:col-span-1 sm:col-span-2 text-xs font-semibold text-gray-600 dark:text-gray-400 mb-1",children:"Review Description"}),e.jsx(H,{required:!0,register:w,label:"Review Description",name:"review_description",type:"text",placeholder:"Review Description"}),e.jsx(y,{errorName:f.review_description})]}),e.jsxs("div",{className:"flex justify-between ",children:[e.jsxs(r.Button,{className:"mt-6",type:"button",onClick:v,children:["Cancel"," "]}),e.jsx(r.Button,{className:"mt-6",type:"submit",children:"Update"})]})]})})})}):a.data.length>=0?a==null?void 0:a.data.map((s,P)=>{var T,C,D,_;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"sm:col-span-4",children:e.jsxs(r.Card,{children:[e.jsx("img",{className:"w-full h-64",src:(T=s==null?void 0:s.productId)==null?void 0:T.image[0]}),e.jsxs(r.CardBody,{children:[e.jsx("p",{className:"mb-4 font-semibold text-gray-600 dark:text-gray-300",children:(D=(C=s==null?void 0:s.productId)==null?void 0:C.title)==null?void 0:D.en}),e.jsxs("p",{className:" flex justify-between mb-4 font-semibold text-gray-600 dark:text-gray-300",children:[e.jsxs("div",{className:"flex justify-between gap-2",children:[e.jsx(r.Avatar,{size:"small",src:(_=s==null?void 0:s.user)==null?void 0:_.image,alt:"Judith"}),s==null?void 0:s.name,s.emailStatus&&e.jsx(r.Badge,{type:"success",children:"verified"})]}),e.jsxs("div",{className:"flex items-center",children:[Array(s==null?void 0:s.rating).fill(0).map((le,M)=>e.jsx(e.Fragment,{children:e.jsx("svg",{className:"w-4 h-4 text-yellow-300 me-1","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 22 20",children:e.jsx("path",{d:"M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"})},M)})),e.jsx("p",{className:"ms-1 text-sm font-medium text-gray-500 dark:text-gray-400",children:s==null?void 0:s.rating}),e.jsx("p",{className:"ms-1 text-sm font-medium text-gray-500 dark:text-gray-400",children:"out of"}),e.jsx("p",{className:"ms-1 text-sm font-medium text-gray-500 dark:text-gray-400",children:"5"})]})]}),e.jsxs("p",{className:"mb-4 font-semibold text-gray-400 dark:text-gray-200",children:['"',s==null?void 0:s.reviewTitle,'"']}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:['"',s.review,'"']}),e.jsx(J,{id:s==null?void 0:s._id,handleUpdate:p,handleModalOpen:x,title:s==null?void 0:s.reviewTitle})]})]})},P)})}):e.jsx(L,{title:"Sorry, There are no customers reviews right now."})}),e.jsx(r.TableFooter,{children:e.jsx(r.Pagination,{totalResults:j,resultsPerPage:E,onChange:F,label:"Table navigation"})})]})]})]})};export{De as default};
