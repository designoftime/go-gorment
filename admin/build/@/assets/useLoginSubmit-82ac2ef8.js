import{k as A,r as p,A as L,l as N,e as O,m as E,b as u}from"./index-7c01ca44.js";import{u as I}from"./index.esm-af67facc.js";import{A as a}from"./AdminServices-4c874cc4.js";import{n as o,a as i}from"./toast-c08e7dd2.js";const G=()=>{const g=A(),[l,s]=p.useState(!1),{dispatch:n}=p.useContext(L),m=N(),t=O(),{register:S,handleSubmit:d,formState:{errors:h}}=I();return{onSubmit:({name:y,email:c,verifyEmail:x,password:r,role:b})=>{s(!0);const f=.5;t.pathname==="/login"&&(g(E("globalSetting")),a.loginAdmin({email:c,password:r}).then(e=>{e&&(s(!1),o("Login Success!"),n({type:"USER_LOGIN",payload:e}),u.set("adminInfo",JSON.stringify(e),{expires:f,sameSite:"None",secure:!0}),m.replace("/"))}).catch(e=>{i(e?e.response.data.message:e.message),s(!1)})),t.pathname==="/signup"&&a.registerAdmin({name:y,email:c,password:r,role:b}).then(e=>{e&&(s(!1),o("Register Success!"),n({type:"USER_LOGIN",payload:e}),u.set("adminInfo",JSON.stringify(e),{expires:f,sameSite:"None",secure:!0}),m.replace("/"))}).catch(e=>{i(e?e.response.data.message:e.message),s(!1)}),t.pathname==="/forgot-password"&&a.forgetPassword({verifyEmail:x}).then(e=>{s(!1),o(e.message)}).catch(e=>{s(!1),i(e?e.response.data.message:e.message)})},register:S,handleSubmit:d,errors:h,loading:l}};export{G as u};
