import{A as Ye}from"./browser-02be543b.js";import{d as A}from"./index-c0062c01.js";import{c as te,g as oe,r as o,b as ze,S as Ie}from"./index-400dc113.js";import"./httpService-59fba275.js";import{a as U}from"./toast-3aa3cc69.js";import{u as Ze}from"./useUtilsFunction-1ca81bcd.js";var ne={exports:{}};(function(f,R){(function(y,d){f.exports=d()})(te,function(){return function(y,d,C){d.prototype.isBetween=function(c,L,i,g){var l=C(c),w=C(L),b=(g=g||"()")[0]==="(",F=g[1]===")";return(b?this.isAfter(l,i):!this.isBefore(l,i))&&(F?this.isBefore(w,i):!this.isAfter(w,i))||(b?this.isBefore(l,i):!this.isAfter(l,i))&&(F?this.isAfter(w,i):!this.isBefore(w,i))}}})})(ne);var $e=ne.exports;const Ge=oe($e);var se={exports:{}};(function(f,R){(function(y,d){f.exports=d()})(te,function(){return function(y,d,C){d.prototype.isToday=function(){var c="YYYY-MM-DD",L=C();return this.format(c)===L.format(c)}}})})(se);var He=se.exports;const Ne=oe(He),wt=f=>{new Ye({allErrors:!0});const[R,y]=o.useState(""),[d,C]=o.useState(""),[c,L]=o.useState(""),[i,g]=o.useState(""),[l,w]=o.useState(""),[b,F]=o.useState(""),[p,I]=o.useState(""),[S,Z]=o.useState(""),[x,$]=o.useState(""),[re,ae]=o.useState(""),[v,ue]=o.useState(""),[B,ie]=o.useState(""),[le,de]=o.useState([]),[fe,ce]=o.useState([]),[pe,Se]=o.useState([]),[_,me]=o.useState(""),[E,we]=o.useState(""),[P,Ce]=o.useState(""),[j,Le]=o.useState(1),[ge,G]=o.useState([]),[be,De]=o.useState(""),[Re,ye]=o.useState(""),[xe,ve]=o.useState(""),[ke,Oe]=o.useState([]),[he,Ae]=o.useState(""),[Fe,Pe]=o.useState(!1),[M,Te]=o.useState(""),[H]=o.useState([]),N=o.useRef(""),k=o.useRef(""),q=o.useRef(""),J=o.useRef(""),K=o.useRef(""),Y=o.useRef(""),Q=o.useRef(""),V=o.useRef(""),W=o.useRef(""),Ue=o.useRef(""),X=o.useRef("");A.extend(Ge),A.extend(Ne);const ee=ze(),{lang:O,setIsUpdate:qe,setLoading:Je}=o.useContext(Ie),{globalSetting:D}=Ze(),m=o.useMemo(()=>{const n=new Date;n.setDate(n.getDate()-P);let t=f==null?void 0:f.map(e=>{const s=new Date(e==null?void 0:e.updatedAt).toLocaleString("en-US",{timeZone:D==null?void 0:D.default_time_zone});return{...e,updatedDate:s==="Invalid Date"?"":s}});if(ee.pathname==="/dashboard"){const e=t==null?void 0:t.filter(u=>u.status==="Pending");de(e);const s=t==null?void 0:t.filter(u=>u.status==="Processing");ce(s);const r=t==null?void 0:t.filter(u=>u.status==="Delivered");Se(r);const a=t==null?void 0:t.filter(u=>A(u.createdAt).isToday()),Ee=a==null?void 0:a.reduce((u,h)=>u+h.total,0);De(Ee);const z=t==null?void 0:t.filter(u=>A(u.createdAt).isBetween(new Date().setDate(new Date().getDate()-30),new Date)),je=z==null?void 0:z.reduce((u,h)=>u+h.total,0);ye(je);const Me=t==null?void 0:t.reduce((u,h)=>u+h.total,0);ve(Me)}return R&&(t=t.filter(e=>e.parent===R)),d==="Low"&&(t=t.sort((e,s)=>e.price<s.price&&-1)),d==="High"&&(t=t.sort((e,s)=>e.price>s.price&&-1)),c&&(t=t.filter(e=>{var s;return(s=e==null?void 0:e.title)==null?void 0:s.toLowerCase().includes(c.toLowerCase())})),S&&(t=t.filter(e=>{var s,r,a;return((r=(s=e==null?void 0:e.title[O])==null?void 0:s.toLowerCase())==null?void 0:r.includes(S==null?void 0:S.toLowerCase()))||((a=e==null?void 0:e.attribute)==null?void 0:a.toLowerCase().includes(S==null?void 0:S.toLowerCase()))})),p&&(t=t.filter(e=>{var s,r,a;return((r=(s=e==null?void 0:e.name[O])==null?void 0:s.toLowerCase())==null?void 0:r.includes(p==null?void 0:p.toLowerCase()))||((a=e==null?void 0:e.category)==null?void 0:a.toLowerCase().includes(p==null?void 0:p.toLowerCase()))})),E&&(t=t.filter(e=>e.role===E)),i&&(t=t.filter(e=>{var s,r,a;return((s=e==null?void 0:e.name[O])==null?void 0:s.toLowerCase().includes(i.toLowerCase()))||((r=e==null?void 0:e.phone)==null?void 0:r.toLowerCase().includes(i.toLowerCase()))||((a=e==null?void 0:e.email)==null?void 0:a.toLowerCase().includes(i.toLowerCase()))})),l&&(t=t==null?void 0:t.filter(e=>{var s,r,a;return((r=(s=e==null?void 0:e.title[O])==null?void 0:s.toLowerCase())==null?void 0:r.includes(l==null?void 0:l.toLowerCase()))||((a=e==null?void 0:e.couponCode)==null?void 0:a.toLowerCase().includes(l==null?void 0:l.toLowerCase()))})),_&&(t=t.filter(e=>e.status===_)),b&&(t=t.filter(e=>e.contact.toLowerCase().includes(b.toLowerCase()))),P&&(t=t.filter(e=>A(e.createdAt).isBetween(n,new Date))),x&&(t=t.filter(e=>{var s,r;return((s=e==null?void 0:e.name)==null?void 0:s.toLowerCase().includes(x.toLowerCase()))||((r=e==null?void 0:e.iso_code)==null?void 0:r.toLowerCase().includes(x.toLowerCase()))})),M&&(t=t.filter(e=>e==null?void 0:e.name.toLowerCase().includes(M.toLowerCase()))),v&&(t=t.filter(e=>e.name.toLowerCase().includes(v.toLowerCase())||e.iso_code.toLowerCase().includes(v.toLowerCase())||e.language_code.toLowerCase().includes(v.toLowerCase()))),B&&(t=t.filter(e=>e.iso_code.toLowerCase().includes(B.toLowerCase()))),t},[P,f,ee.pathname,R,d,c,S,p,E,i,l,_,b,x,M,v,B,Y,D==null?void 0:D.default_time_zone,O]),T=20,Be=m==null?void 0:m.length,_e=n=>{Le(n)};return o.useEffect(()=>{G(m==null?void 0:m.slice((j-1)*T,j*T))},[m,j,T]),{userRef:q,searchRef:k,couponRef:J,orderRef:K,categoryRef:Y,attributeRef:Q,pending:le,processing:fe,delivered:pe,todayOrder:be,monthlyOrder:Re,totalOrder:xe,setFilter:y,setSortedField:C,setStatus:me,setRole:we,time:P,zone:re,setTime:Ce,taxRef:Ue,setZone:ae,filename:he,countryRef:V,dataTable:ge,serviceData:m,country:x,setSearchText:L,setCountry:$,isDisabled:Fe,languageRef:W,currencyRef:N,shippingRef:X,setSearchUser:g,setDataTable:G,setCategoryType:I,handleChangePage:_e,totalResults:Be,resultsPerPage:T,handleOnDrop:n=>{for(let t=0;t<n.length;t++)H.push(n[t].data)},setSearchCoupon:w,setAttributeTitle:Z,handleSelectFile:n=>(n.preventDefault(),U("This feature is disabled for demo!")),handleSubmitUser:n=>{n.preventDefault(),g(q.current.value)},handleSubmitForAll:n=>{n.preventDefault(),L(k.current.value)},handleSubmitCoupon:n=>{n.preventDefault(),w(J.current.value)},handleSubmitOrder:n=>{n.preventDefault(),F(K.current.value)},handleSubmitCategory:n=>{n.preventDefault(),I(Y.current.value)},handleSubmitAttribute:n=>{n.preventDefault(),Z(Q.current.value)},handleUploadProducts:()=>{if(H.length<1)U("Please upload/select csv file first!");else return U("This feature is disabled for demo!")},handleSubmitCountry:n=>{n.preventDefault(),$(V.current.value)},handleSubmitCurrency:n=>{n.preventDefault(),ie(N.current.value)},handleSubmitShipping:n=>{n.preventDefault(),Te(X.current.value)},handleSubmitLanguage:n=>{n.preventDefault(),ue(W.current.value)},handleUploadMultiple:n=>U("This feature is disabled for demo!"),handleRemoveSelectFile:n=>{Ae(""),Oe([]),setTimeout(()=>Pe(!1),1e3)}}};export{Ne as a,Ge as i,wt as u};
