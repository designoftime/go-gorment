import{u as N,j as e,d as l,r as f,S,A as k}from"./index-1c0a467e.js";import{l as E,f as I}from"./Layout-bff48155.js";import{u as R}from"./SettingServices-6a140f61.js";import{u as F}from"./useFilter-235f79b9.js";import{T as w,D as B,M as v}from"./DrawerButton-7e9ec6ea.js";import{E as j}from"./index.esm-3cd698c5.js";import{I as b}from"./InputArea-55b4314d.js";import{u as U}from"./useStaffSubmit-9ea0c887.js";import{S as z}from"./SelectRole-48d6cc26.js";import{L as g}from"./LabelArea-38e558df.js";import{U as L}from"./Uploader-dccc64b4.js";import{T as Z}from"./TableLoading-3e0bd846.js";import{S as J}from"./Status-aed291fd.js";import{u as M}from"./useUtilsFunction-ec13b523.js";import{u as _}from"./themeServices-66ec4fb9.js";import{D as $,E as O}from"./EditDeleteButton-59160c67.js";import{a as V}from"./index.prod-a3ffe089.js";import{A as C}from"./AdminServices-8d39c18d.js";import{n as q,a as H}from"./toast-685d86fb.js";import{N as G}from"./NotFound-5ca7005d.js";import{P as K}from"./PageTitle-b3a517ce.js";import"./iconBase-7030a0af.js";import"./httpService-68ab089b.js";import"./browser-4e479095.js";import"./index-94166477.js";import"./SelectLanguageTwo-d2c84d19.js";import"./LanguageServices-dcba787d.js";import"./spinner-f39505bc.js";import"./useTranslationValue-59e40323.js";import"./tslib.es6-1fe07526.js";import"./CustomerServices-e8b5361c.js";import"./CurrencyServices-f68e8881.js";import"./Tooltip-9c357375.js";const T=({id:t})=>{const{register:r,handleSubmit:h,onSubmit:m,errors:i,imageUrl:x,setImageUrl:c,isSubmitting:p,selectedDate:n,setSelectedDate:o,handleSelectLanguage:a}=U(t),{t:d}=N();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full relative p-6 border-b border-gray-100 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:t?e.jsx(w,{register:r,handleSelectLanguage:a,title:d("UpdateStaff"),description:d("UpdateStaffdescription")}):e.jsx(w,{register:r,handleSelectLanguage:a,title:d("AddStaffTitle"),description:d("AddStaffdescription")})}),e.jsx(E.Scrollbars,{className:"w-full md:w-7/12 lg:w-8/12 xl:w-8/12 relative dark:bg-gray-700 dark:text-gray-200",children:e.jsx(l.Card,{className:"overflow-y-scroll flex-grow scrollbar-hide w-full max-h-full",children:e.jsx(l.CardBody,{children:e.jsxs("form",{onSubmit:h(m),children:[e.jsxs("div",{className:"px-6 pt-8 flex-grow scrollbar-hide w-full max-h-full pb-40",children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(g,{label:"Staff Image"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(L,{imageUrl:x,setImageUrl:c,folder:"admin"})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(g,{label:"Name"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(b,{register:r,label:"Name",name:"name",type:"text",autoComplete:"username",placeholder:"Staff name"}),e.jsx(j,{errorName:i.name})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(g,{label:"Email"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(b,{register:r,label:"Email",name:"email",type:"text",autoComplete:"username",pattern:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,placeholder:"Email"}),e.jsx(j,{errorName:i.email})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(g,{label:"Password"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[t?e.jsx(b,{required:!0,register:r,label:"Password",name:"password",type:"password",autoComplete:"current-password",placeholder:"Password"}):e.jsx(b,{register:r,label:"Password",name:"password",type:"password",autoComplete:"current-password",placeholder:"Password"}),e.jsx(j,{errorName:i.password})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(g,{label:"Contact Number"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(b,{register:r,label:"Contact Number",name:"phone",pattern:/^[+]?\d*$/,minLength:6,maxLength:15,type:"text",placeholder:"Phone number"}),e.jsx(j,{errorName:i.phone})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(g,{label:"Joining Date"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(l.Input,{onChange:u=>o(u.target.value),label:"Joining Date",name:"joiningDate",value:n,type:"date",placeholder:d("StaffJoiningDate")}),e.jsx(j,{errorName:i.joiningDate})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(g,{label:"Staff Role"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(z,{register:r,label:"Role",name:"role"}),e.jsx(j,{errorName:i.role})]})]})]}),e.jsx(B,{id:t,title:"Staff",isSubmitting:p})]})})})})]})},Q=({id:t,status:r,option:h,staff:m})=>{const{setIsUpdate:i}=f.useContext(S),x=async(c,p)=>{var n,o;try{let a;r==="Active"?a="Inactive":a="Active";const d=await C.updateStaffStatus(c,{status:a});i(!0),q(d.message);return}catch(a){H(a?(o=(n=a==null?void 0:a.response)==null?void 0:n.data)==null?void 0:o.message:a==null?void 0:a.message)}};return e.jsx(e.Fragment,{children:e.jsx(V,{onChange:()=>x(t),checked:r==="Active",className:"react-switch md:ml-0",uncheckedIcon:e.jsx("div",{style:{display:"flex",alignItems:"center",height:"100%",width:120,fontSize:14,color:"white",paddingRight:22,paddingTop:1}}),width:30,height:15,handleDiameter:13,offColor:"#E53E3E",onColor:"#2F855A",checkedIcon:e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:73,height:"100%",fontSize:14,color:"white",paddingLeft:20,paddingTop:1}})})})},W=({staffs:t,lang:r})=>{const{title:h,serviceId:m,handleModalOpen:i,handleUpdate:x,isSubmitting:c,handleResetPassword:p}=_(),{showDateFormat:n,showingTranslateValue:o}=M();return e.jsxs(e.Fragment,{children:[e.jsx($,{id:m,title:h}),e.jsx(v,{children:e.jsx(T,{id:m})}),e.jsx(l.TableBody,{children:t==null?void 0:t.map(a=>e.jsxs(l.TableRow,{children:[e.jsx(l.TableCell,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(l.Avatar,{className:"hidden mr-3 md:block bg-gray-50",src:a.image,alt:"staff"}),e.jsx("div",{children:e.jsx("h2",{className:"text-sm font-medium",children:o(a==null?void 0:a.name)})})]})}),e.jsxs(l.TableCell,{children:[e.jsx("span",{className:"text-sm",children:a.email})," "]}),e.jsx(l.TableCell,{children:e.jsx("span",{className:"text-sm ",children:a.phone})}),e.jsx(l.TableCell,{children:e.jsx("span",{className:"text-sm",children:n(a.joiningData)})}),e.jsx(l.TableCell,{children:e.jsx("span",{className:"text-sm font-semibold",children:a==null?void 0:a.role})}),e.jsx(l.TableCell,{className:"text-center text-xs",children:e.jsx(J,{status:a.status})}),e.jsx(l.TableCell,{className:"text-center",children:e.jsx(Q,{id:a==null?void 0:a._id,staff:a,option:"staff",status:a.status})}),e.jsx(l.TableCell,{children:e.jsx(O,{id:a._id,staff:a,isSubmitting:c,handleUpdate:x,handleModalOpen:i,handleResetPassword:p,title:o(a==null?void 0:a.name)})})]},a._id))})]})},Ee=()=>{const{state:t}=f.useContext(k),{adminInfo:r}=t,{toggleDrawer:h,lang:m}=f.useContext(S),{data:i,loading:x,error:c}=R(()=>C.getAllStaff({email:r.email})),{userRef:p,setRole:n,totalResults:o,resultsPerPage:a,dataTable:d,serviceData:u,handleChangePage:y,handleSubmitUser:A}=F(i),{t:s}=N(),D=()=>{n(""),p.current.value=""};return e.jsxs(e.Fragment,{children:[e.jsxs(K,{children:[s("StaffPageTitle")," "]}),e.jsx(v,{children:e.jsx(T,{})}),e.jsx(l.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:e.jsx(l.CardBody,{children:e.jsxs("form",{onSubmit:A,className:"py-3 grid gap-4 lg:gap-6 xl:gap-6 md:flex xl:flex",children:[e.jsxs("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:[e.jsx(l.Input,{ref:p,type:"search",name:"search",placeholder:s("StaffSearchBy")}),e.jsx("button",{type:"submit",className:"absolute right-0 top-0 mt-5 mr-1"})]}),e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsxs(l.Select,{onChange:P=>n(P.target.value),children:[e.jsx("option",{value:"All",defaultValue:!0,hidden:!0,children:s("StaffRole")}),e.jsx("option",{value:"Admin",children:s("StaffRoleAdmin")}),e.jsx("option",{value:"Cashier",children:s("SelectCashiers")}),e.jsx("option",{value:"Super Admin",children:s("SelectSuperAdmin")})]})}),e.jsx("div",{className:"w-full md:w-56 lg:w-56 xl:w-56",children:e.jsxs(l.Button,{onClick:h,className:"w-full rounded-md h-12",children:[e.jsx("span",{className:"mr-3",children:e.jsx(I,{})}),s("AddStaff")]})}),e.jsxs("div",{className:"mt-2 md:mt-0 flex items-center xl:gap-x-4 gap-x-1 flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:[e.jsx("div",{className:"w-full mx-1",children:e.jsx(l.Button,{type:"submit",className:"h-12 w-full bg-emerald-700",children:"Filter"})}),e.jsx("div",{className:"w-full",children:e.jsx(l.Button,{layout:"outline",onClick:D,type:"reset",className:"px-4 md:py-1 py-3 text-sm dark:bg-gray-700",children:e.jsx("span",{className:"text-black dark:text-gray-200",children:"Reset"})})})]})]})})}),x?e.jsx(Z,{row:12,col:7,width:163,height:20}):c?e.jsx("span",{className:"text-center mx-auto text-red-500",children:c}):(u==null?void 0:u.length)!==0?e.jsxs(l.TableContainer,{className:"mb-8 rounded-b-lg",children:[e.jsxs(l.Table,{children:[e.jsx(l.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(l.TableCell,{children:s("StaffNameTbl")}),e.jsx(l.TableCell,{children:s("StaffEmailTbl")}),e.jsx(l.TableCell,{children:s("StaffContactTbl")}),e.jsx(l.TableCell,{children:s("StaffJoiningDateTbl")}),e.jsx(l.TableCell,{children:s("StaffRoleTbl")}),e.jsx(l.TableCell,{className:"text-center",children:s("OderStatusTbl")}),e.jsx(l.TableCell,{className:"text-center",children:s("PublishedTbl")}),e.jsx(l.TableCell,{className:"text-right",children:s("StaffActionsTbl")})]})}),e.jsx(W,{staffs:d,lang:m})]}),e.jsx(l.TableFooter,{children:e.jsx(l.Pagination,{totalResults:o,resultsPerPage:a,onChange:y,label:"Table navigation"})})]}):e.jsx(G,{title:"Sorry, There are no staff right now."})]})};export{Ee as default};
