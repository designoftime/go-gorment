import{r as o,S as h,j as s,d as t,m as b,u as p}from"./index-b7a5549d.js";import{j as d}from"./Layout-f2a02bb8.js";import{u as j}from"./SettingServices-7f7a0dde.js";import{u as T}from"./useFilter-d1e31a51.js";import{P as C}from"./PageTitle-800b2fce.js";import{L as g}from"./Loading-b98c603b.js";import{C as x}from"./CustomerServices-5f73556c.js";import{S as f}from"./Status-3553f405.js";import{u as y}from"./useUtilsFunction-3ede5aec.js";import{n as N,a as S}from"./toast-03090123.js";import"./iconBase-4887631a.js";import"./httpService-f80adca5.js";import"./browser-f394fd76.js";import"./index-3dfa6e17.js";const v=({subscriptionId:c,order:a})=>{const{setIsUpdate:l}=o.useContext(h),n=e=>{x.updateCustomerSub({subscriptionId:e.target.value}).then(i=>{N(i.message),l(!0)}).catch(i=>S(i.message))};return s.jsx(s.Fragment,{children:s.jsxs(t.Select,{onChange:e=>n(e),className:"h-8",children:[s.jsx("option",{value:"status",defaultValue:!0,hidden:!0,children:a==null?void 0:a.status}),s.jsx("option",{defaultValue:(a==null?void 0:a.status)==="Inactive",value:c,children:"Inactive"})]})})},I=({orders:c})=>{const{showDateTimeFormat:a,getNumberTwo:l,currency:n}=y();return s.jsx(s.Fragment,{children:s.jsx(t.TableBody,{children:c==null?void 0:c.map(e=>{var i,r,u;return s.jsxs(t.TableRow,{children:[s.jsx(t.TableCell,{children:s.jsx("span",{className:"font-semibold uppercase text-xs",children:(i=e==null?void 0:e._id)==null?void 0:i.substring(20,24)})}),s.jsx(t.TableCell,{children:s.jsx("span",{className:"text-sm",children:(u=(r=e==null?void 0:e.product)==null?void 0:r.title)==null?void 0:u.en})}),s.jsx(t.TableCell,{children:s.jsx("span",{className:"text-sm",children:e==null?void 0:e.attribute})}),s.jsxs(t.TableCell,{children:[" ",s.jsx("span",{className:"text-sm",children:e==null?void 0:e.quantity})," "]}),s.jsx(t.TableCell,{children:s.jsx("span",{className:"text-sm font-semibold",children:e.subscription_duration})}),s.jsxs(t.TableCell,{children:[s.jsxs("span",{className:"text-sm font-semibold",children:[n,l(e.subscription_price)]})," "]}),s.jsx(t.TableCell,{className:"text-center",children:s.jsx(f,{status:e.status})}),s.jsx(t.TableCell,{className:"text-center",children:s.jsx(v,{subscriptionId:e._id,order:e})})]},e._id)})})})},q=()=>{var m;const{id:c}=b(),{t:a}=p(),{data:l,loading:n,error:e}=j(()=>x.getSubscriptionById(c)),{handleChangePage:i,totalResults:r,resultsPerPage:u,dataTable:P}=T(l.subscriptionType);return s.jsxs(s.Fragment,{children:[s.jsx(C,{children:a("Customer Subscription List")}),n&&s.jsx(g,{loading:n}),!e&&!n&&l.subscriptionType.length===0&&s.jsx("div",{className:"w-full bg-white rounded-md dark:bg-gray-800",children:s.jsxs("div",{className:"p-8 text-center",children:[s.jsx("span",{className:"flex justify-center my-30 text-red-500 font-semibold text-6xl",children:s.jsx(d,{})}),s.jsx("h2",{className:"font-medium text-base mt-4 text-gray-600",children:a("CustomerOrderEmpty")})]})}),((m=l.subscriptionType)==null?void 0:m.length)>0&&!e&&!n?s.jsxs(t.TableContainer,{className:"mb-8",children:[s.jsxs(t.Table,{children:[s.jsx(t.TableHeader,{children:s.jsxs("tr",{children:[s.jsxs(t.TableCell,{children:[" ",a("CustomerOrderId")," "]}),s.jsx(t.TableCell,{children:a("Product Title")}),s.jsx(t.TableCell,{children:a("Attribute")}),s.jsxs(t.TableCell,{children:[a("Quantity")," "]}),s.jsxs(t.TableCell,{children:[a("Duration")," "]}),s.jsx(t.TableCell,{children:a("Amount")}),s.jsxs(t.TableCell,{className:"text-center",children:[" ",a("CustomerOrderStatus")," "]}),s.jsx(t.TableCell,{className:"text-center",children:a("CustomerOrderAction")})]})}),s.jsx(I,{orders:l.subscriptionType})]}),s.jsx(t.TableFooter,{children:s.jsx(t.Pagination,{totalResults:r,resultsPerPage:u,onChange:i,label:"Table navigation"})})]}):null]})};export{q as default};
