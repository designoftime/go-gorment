import{i as A,r as p,A as L,k as N,b as O,l as E,a as u}from"./index-1609f9a4.js";import{u as I}from"./index.esm-419c0750.js";import{A as a}from"./AdminServices-2d1dac79.js";import{n as o,a as i}from"./toast-d99d15c4.js";const G=()=>{const g=A(),[l,s]=p.useState(!1),{dispatch:n}=p.useContext(L),c=N(),t=O(),{register:S,handleSubmit:d,formState:{errors:h}}=I();return{onSubmit:({name:y,email:m,verifyEmail:x,password:r,role:b})=>{s(!0);const f=.5;t.pathname==="/login"&&(g(E("globalSetting")),a.loginAdmin({email:m,password:r}).then(e=>{e&&(s(!1),o("Login Success!"),n({type:"USER_LOGIN",payload:e}),u.set("adminInfo",JSON.stringify(e),{expires:f,sameSite:"None",secure:!0}),c.replace("/"))}).catch(e=>{i(e?e.response.data.message:e.message),s(!1)})),t.pathname==="/signup"&&a.registerAdmin({name:y,email:m,password:r,role:b}).then(e=>{e&&(s(!1),o("Register Success!"),n({type:"USER_LOGIN",payload:e}),u.set("adminInfo",JSON.stringify(e),{expires:f,sameSite:"None",secure:!0}),c.replace("/"))}).catch(e=>{i(e?e.response.data.message:e.message),s(!1)}),t.pathname==="/forgot-password"&&a.forgetPassword({verifyEmail:x}).then(e=>{s(!1),o(e.message)}).catch(e=>{s(!1),i(e?e.response.data.message:e.message)})},register:S,handleSubmit:d,errors:h,loading:l}};export{G as u};
